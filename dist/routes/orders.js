"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const auth_1 = require("../middleware/auth");
const validate_1 = require("../middleware/validate");
const order_validator_1 = require("../validators/order.validator");
const order_controller_1 = require("../controllers/order.controller");
const router = (0, express_1.Router)();
const orderController = new order_controller_1.OrderController();
router.use(auth_1.authMiddleware);
router.get("/", (0, validate_1.validateQuery)(order_validator_1.listOrdersQuerySchema), (req, res) => orderController.listOrders(req, res));
router.post("/", (0, validate_1.validate)(order_validator_1.createOrderSchema), (req, res) => orderController.createOrder(req, res));
router.get("/:id", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (req, res) => orderController.getOrder(req, res));
router.put("/:id", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (0, validate_1.validate)(order_validator_1.updateOrderSchema), (req, res) => orderController.updateOrder(req, res));
router.post("/:id/bookings", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (0, validate_1.validate)(order_validator_1.addBookingToOrderSchema), (req, res) => orderController.addBooking(req, res));
router.get("/:id/preview-cancellation-refund", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (req, res) => orderController.previewCancellationRefund(req, res));
router.post("/:id/cancel", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (0, validate_1.validate)(order_validator_1.cancelOrderSchema), (req, res) => orderController.cancelOrder(req, res));
router.get("/:id/invoice", (0, validate_1.validateParams)(order_validator_1.getOrderParamsSchema), (req, res) => orderController.generateInvoice(req, res));
exports.default = router;
